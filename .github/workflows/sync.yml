# This workflow will build a Java project with Maven
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: github code to gitee

on:
  push:
    branches: [ master,dev ]
  pull_request:
    branches: [ master,dev ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Mirror the Github organization repos to Gitee.
        uses: Yikun/hub-mirror-action@master
        with:
          src: pig-mesh/pig
          dst: log4j/pig
          dst_key: ${{ secrets.GITEE_PRIVATE_KEY }}
          dst_token: ${{ secrets.GITEE_TOKEN }}
          account_type: org

      - name: success
        if: ${{ success() }}
        uses: fifsky/dingtalk-action@master
        with:
          url: ${{ secrets.DINGTALK_WEBHOOK}}
          type: markdown
          content: |
            # ğŸ’¯ğŸ‘¨â€ğŸ’» Success ğŸ‰ğŸ‰ğŸ‰
            > Github Action: github to gitee success
            > ^_^ from github action message

      - name:  failure
        if: ${{ failure() }}
        uses: fifsky/dingtalk-action@master
        with:
          url: ${{ secrets.DINGTALK_WEBHOOK}}
          type: markdown
          content: |
            # ğŸ’¤ğŸ¤·â€â™€ï¸ failure ğŸ™…â€â™‚ï¸ğŸ’£
            > Github Action: github to gitee failure
            > (â‹Ÿï¹â‹)   from github action message
